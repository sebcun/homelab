{% extends "base.html" %} {% block title %} YSWS-Template {% endblock %} {%
block head %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/dashboard.css') }}"
/>
<style>
  .fade-in {
    animation: fadeIn 0.3s ease-in-out;
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  .form-check-input:checked + .form-check-label {
    text-decoration: line-through;
    color: #6c757d;
  }
</style>
{% endblock %}{% block hackclub_flag %} {% endblock %}{% block navbar_balance %} {% endblock %} {% block content %}

<div class="container py-5 vh-100">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Projects</h1>
    <button class="btn btn-primary">
      <i class="bi bi-plus-lg me-2"></i>Create Project
    </button>
  </div>

  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    <div class="col">
      <div class="card h-100 shadow border-0 rounded-3">
        <div class="p-2">
          <img
            src="https://m.media-amazon.com/images/I/518LvVkg77L._AC_SL1280_.jpg"
            class="card-img-top rounded-top-3"
            alt="Project Image"
            style="height: 160px; object-fit: contain"
          />
        </div>
        <div class="card-body d-flex flex-column">
          <div class="d-flex justify-content-between align-items-start mb-2">
            <h5 class="card-title mb-0 text-truncate">Project</h5>
            <span class="badge bg-success">SHIPPED</span>
          </div>
          <p class="card-text text-truncate">Description Here.</p>
          <div
            class="d-flex justify-content-between align-items-center mt-auto"
          >
            <h6 class="text-muted mb-0">0h</h6>
            <button
              type="button"
              class="btn btn-outline-primary btn-sm"
              data-bs-toggle="modal"
              data-bs-target="#projectModal"
            >
              View Project
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="col">
      <div class="card h-100 shadow border-0 rounded-3">
        <div class="p-2">
          <img
            src="https://m.media-amazon.com/images/I/518LvVkg77L._AC_SL1280_.jpg"
            class="card-img-top rounded-top-3"
            alt="Project Image"
            style="height: 160px; object-fit: contain"
          />
        </div>
        <div class="card-body d-flex flex-column">
          <div class="d-flex justify-content-between align-items-start mb-2">
            <h5 class="card-title mb-0 text-truncate">Project</h5>
            <span class="badge bg-warning text-dark">BUILDING</span>
          </div>
          <p class="card-text text-truncate">description.</p>
          <div
            class="d-flex justify-content-between align-items-center mt-auto"
          >
            <h6 class="text-muted mb-0">0h</h6>
            <a href="#" class="btn btn-outline-primary btn-sm">View Project</a>
          </div>
        </div>
      </div>
    </div>

    <div class="col">
      <div class="card h-100 shadow border-0 rounded-3">
        <div class="p-2">
          <img
            src="https://m.media-amazon.com/images/I/518LvVkg77L._AC_SL1280_.jpg"
            class="card-img-top rounded-top-3"
            alt="Project Image"
            style="height: 160px; object-fit: contain"
          />
        </div>
        <div class="card-body d-flex flex-column">
          <div class="d-flex justify-content-between align-items-start mb-2">
            <h5 class="card-title mb-0 text-truncate">Project</h5>
            <span class="badge bg-info text-dark">PENDING</span>
          </div>
          <p class="card-text text-truncate">Description</p>
          <div
            class="d-flex justify-content-between align-items-center mt-auto"
          >
            <h6 class="text-muted mb-0">0h</h6>
            <a href="#" class="btn btn-outline-primary btn-sm">View Project</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="projectModal"
  tabindex="-1"
  aria-labelledby="projectModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content overflow-hidden border-0 shadow">
      <div class="position-relative">
        <img
          src="https://m.media-amazon.com/images/I/518LvVkg77L._AC_SL1280_.jpg"
          class="w-100 project-modal-img"
          alt="Project Header"
        />
        <button
          type="button"
          class="btn-close position-absolute top-0 end-0 m-3 project-modal-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body p-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <div class="w-100 me-3">
            <h2
              class="modal-title fw-bold mb-0 view-element"
              id="projectModalLabel"
            >
              Project
            </h2>
            <input
              type="text"
              class="form-control edit-element"
              id="projectTitleInput"
              value="Project"
              style="display: none"
            />
          </div>
          <div class="d-flex align-items-center gap-2">
            <span class="fw-bold fs-5">0h</span>
            <span class="badge bg-success">SHIPPED</span>
          </div>
        </div>

        <div class="mb-4">
          <h5 class="fw-bold">Description</h5>
          <p class="text-muted view-element" id="projectDescText">
            Description Here.
          </p>
          <textarea
            class="form-control edit-element"
            id="projectDescInput"
            rows="3"
            style="display: none"
          >
Description Here.</textarea
          >
        </div>

        <div class="mb-4">
          <label class="form-label fw-bold">Hackatime Projects</label>
          <div class="dropdown">
            <button
              class="btn custom-dropdown-btn w-100 text-start d-flex justify-content-between align-items-center"
              type="button"
              id="hackatimeDropdown"
              data-bs-toggle="dropdown"
              data-bs-auto-close="outside"
              aria-expanded="false"
              disabled
            >
              <span id="selectedProjectsText" class="text-muted"
                >Select projects...</span
              >
              <i class="bi bi-chevron-down"></i>
            </button>
            <ul class="dropdown-menu w-100" aria-labelledby="hackatimeDropdown">
              <li>
                <a class="dropdown-item" href="#"
                  ><div class="form-check">
                    <input
                      class="form-check-input hackatime-checkbox"
                      type="checkbox"
                      value="1"
                      id="project1"
                    /><label class="form-check-label w-100" for="project1"
                      >1</label
                    >
                  </div></a
                >
              </li>
              <li>
                <a class="dropdown-item" href="#"
                  ><div class="form-check">
                    <input
                      class="form-check-input hackatime-checkbox"
                      type="checkbox"
                      value="2"
                      id="project2"
                    /><label class="form-check-label w-100" for="project2"
                      >2</label
                    >
                  </div></a
                >
              </li>
              <li>
                <a class="dropdown-item" href="#"
                  ><div class="form-check">
                    <input
                      class="form-check-input hackatime-checkbox"
                      type="checkbox"
                      value="3"
                      id="project3"
                    /><label class="form-check-label w-100" for="project3"
                      >3</label
                    >
                  </div></a
                >
              </li>
              <li>
                <a class="dropdown-item" href="#"
                  ><div class="form-check">
                    <input
                      class="form-check-input hackatime-checkbox"
                      type="checkbox"
                      value="4"
                      id="project4"
                    /><label class="form-check-label w-100" for="project4"
                      >4</label
                    >
                  </div></a
                >
              </li>
              <li>
                <a class="dropdown-item" href="#"
                  ><div class="form-check">
                    <input
                      class="form-check-input hackatime-checkbox"
                      type="checkbox"
                      value="5"
                      id="project5"
                    /><label class="form-check-label w-100" for="project5"
                      >5</label
                    >
                  </div></a
                >
              </li>
              <li>
                <a class="dropdown-item" href="#"
                  ><div class="form-check">
                    <input
                      class="form-check-input hackatime-checkbox"
                      type="checkbox"
                      value="6"
                      id="project6"
                    /><label class="form-check-label w-100" for="project6"
                      >6</label
                    >
                  </div></a
                >
              </li>
              <li>
                <a class="dropdown-item" href="#"
                  ><div class="form-check">
                    <input
                      class="form-check-input hackatime-checkbox"
                      type="checkbox"
                      value="7"
                      id="project7"
                    /><label class="form-check-label w-100" for="project7"
                      >7</label
                    >
                  </div></a
                >
              </li>
            </ul>
          </div>
        </div>

        <div class="mb-4">
          <h5 class="fw-bold mb-3">Links</h5>
          <div class="d-flex gap-3 flex-column flex-md-row">
            <div class="input-group">
              <span class="input-group-text input-group-text-modern"
                ><i class="bi bi-github"></i
              ></span>
              <input
                type="text"
                class="form-control form-control-modern group-end link-input"
                placeholder="Github Link"
                value="https://github.com"
                readonly
              />
            </div>
            <div class="input-group">
              <span class="input-group-text input-group-text-modern"
                ><i class="bi bi-link-45deg"></i
              ></span>
              <input
                type="text"
                class="form-control form-control-modern group-end link-input"
                placeholder="Demo Link"
                value="https://demo.com"
                readonly
              />
            </div>
          </div>
        </div>

        <div class="d-flex justify-content-end gap-2 mt-5">
          <button type="button" class="btn btn-outline-danger">Delete</button>
          <button
            type="button"
            class="btn btn-outline-secondary view-element"
            id="editBtn"
          >
            Edit
          </button>
          <button
            type="button"
            class="btn btn-primary view-element"
            id="submitBtn"
          >
            Submit
          </button>
          <button
            type="button"
            class="btn btn-primary edit-element"
            id="saveBtn"
            style="display: none"
          >
            Save
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="submitChecklistModal"
  tabindex="-1"
  aria-labelledby="submitChecklistModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content shadow border-0 rounded-3">
      <div class="modal-header border-0">
        <h5 class="modal-title fw-bold" id="submitChecklistModalLabel">
          Submit Project
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="form-check mb-3">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="checkHours"
            checked
            disabled
          />
          <label class="form-check-label" for="checkHours">
            Worked on this project for at least 3 hours
          </label>
        </div>
        <div class="form-check mb-3">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="checkDemo"
          />
          <label class="form-check-label" for="checkDemo">
            A working demo link
          </label>
        </div>
        <div class="form-check mb-3">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="checkReadme"
          />
          <label class="form-check-label" for="checkReadme">
            A readme on the Git repo that is not written by AI
          </label>
        </div>
        <div class="form-check mb-3">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="checkBanner"
            checked
            disabled
          />
          <label class="form-check-label" for="checkBanner">
            A banner image for the project has been uploaded
          </label>
        </div>
        <div class="form-check mb-3">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="checkShippable"
          />
          <label class="form-check-label" for="checkShippable">
            The project is in a working, shippable state
          </label>
        </div>
      </div>
      <div class="modal-footer border-0">
        <button
          type="button"
          class="btn btn-outline-secondary"
          data-bs-dismiss="modal"
        >
          Nevermind
        </button>
        <button
          type="button"
          class="btn btn-primary"
          id="finalSubmitBtn"
          disabled
        >
          Submit
        </button>
      </div>
    </div>
  </div>
</div>

<footer class="py-4 bg-light text-center">
  <div class="container">
    <span class="text-muted"
      >This website is <a href="https://github.com">Open source!</a></span
    >
  </div>
</footer>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const checkboxes = document.querySelectorAll(".hackatime-checkbox");
    const selectedText = document.getElementById("selectedProjectsText");

    function updateSelectedText() {
      const selected = Array.from(checkboxes)
        .filter((cb) => cb.checked)
        .map((cb) => cb.value);

      if (selected.length === 0) {
        selectedText.textContent = "Select projects...";
        selectedText.classList.add("text-muted");
      } else {
        selectedText.textContent = selected.join(", ");
        selectedText.classList.remove("text-muted");
      }
    }

    checkboxes.forEach((cb) => {
      cb.addEventListener("change", updateSelectedText);
      cb.closest(".dropdown-item").addEventListener("click", function (e) {
        e.stopPropagation();
        if (e.target !== cb) {
          cb.checked = !cb.checked;
          updateSelectedText();
        }
      });
    });

    const editBtn = document.getElementById("editBtn");
    const saveBtn = document.getElementById("saveBtn");
    const submitBtn = document.getElementById("submitBtn");
    const viewElements = document.querySelectorAll(".view-element");
    const editElements = document.querySelectorAll(".edit-element");
    const linkInputs = document.querySelectorAll(".link-input");
    const dropdownBtn = document.getElementById("hackatimeDropdown");

    const titleText = document.getElementById("projectModalLabel");
    const titleInput = document.getElementById("projectTitleInput");
    const descText = document.getElementById("projectDescText");
    const descInput = document.getElementById("projectDescInput");

    editBtn.addEventListener("click", () => {
      toggleEdit(true);
    });

    saveBtn.addEventListener("click", () => {
      titleText.textContent = titleInput.value;
      descText.textContent = descInput.value;
      toggleEdit(false);
    });

    const submitChecklistModalEl = document.getElementById(
      "submitChecklistModal"
    );
    const submitChecklistModal = new bootstrap.Modal(submitChecklistModalEl);

    submitBtn.addEventListener("click", () => {
      submitChecklistModal.show();
    });

    submitChecklistModalEl.addEventListener("show.bs.modal", function () {
      const zIndex = 1060;
      this.style.zIndex = zIndex;
      setTimeout(() => {
        const backdrops = document.querySelectorAll(".modal-backdrop");
        if (backdrops.length > 1) {
          const lastBackdrop = backdrops[backdrops.length - 1];
          lastBackdrop.style.zIndex = zIndex - 1;
        }
      }, 0);
    });

    const checklistItems =
      submitChecklistModalEl.querySelectorAll(".form-check-input");
    const finalSubmitBtn = document.getElementById("finalSubmitBtn");

    function checkAllChecked() {
      const allChecked = Array.from(checklistItems).every((cb) => cb.checked);
      finalSubmitBtn.disabled = !allChecked;
    }

    checklistItems.forEach((cb) => {
      cb.addEventListener("change", checkAllChecked);
    });

    function toggleEdit(isEdit) {
      if (isEdit) {
        viewElements.forEach((el) => (el.style.display = "none"));
        editElements.forEach((el) => {
          el.style.display = "";
          el.classList.add("fade-in");
        });
        linkInputs.forEach((input) => input.removeAttribute("readonly"));
        dropdownBtn.removeAttribute("disabled");
      } else {
        editElements.forEach((el) => (el.style.display = "none"));
        viewElements.forEach((el) => {
          el.style.display = "";
          el.classList.add("fade-in");
        });
        linkInputs.forEach((input) => input.setAttribute("readonly", true));
        dropdownBtn.setAttribute("disabled", true);
      }
    }
  });
</script>
{% endblock %}
